<!DOCTYPE html>
<html lang="en">

<head>
  <!-- basic -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- mobile metas -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="viewport" content="initial-scale=1, maximum-scale=1">
  <!-- site metas -->
  <title>Inicio</title>
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="">
  <!-- bootstrap css -->
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
  <!-- style css -->
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <!-- Responsive-->
  <link rel="stylesheet" href="css/responsive.css">
  <!-- fevicon -->
  <link rel="icon" href="images/fevicon.png" type="image/gif" />
  <!-- Scrollbar Custom CSS -->
  <link rel="stylesheet" href="css/jquery.mCustomScrollbar.min.css">
  <!-- Tweaks for older IEs-->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
  <!-- owl stylesheets -->
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <link rel="stylesoeet" href="css/owl.theme.default.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
    media="screen">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
   <link rel="manifest" href="manifest.json">
   <meta name="theme-color" content="#ff69b4">
</head>

<body>
  <canvas id="orangeCanvas"></canvas>
  <!-- header section start -->
  <div class="header_section">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="logo custom-logo">
        <a href="index.html"><img src="images/log.png" alt="Logo"></a>
      </div>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup"
        aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
        <div class="navbar-nav">
          <a class="nav-item nav-link" href="index.html"><i class="fas fa-home"></i> Inicio</a>
          <a class="nav-item nav-link" href="acerca.html"><i class="fas fa-info-circle"></i> Acerca de</a>
          <a class="nav-item nav-link" href="informacion.html"><i class="fas fa-book"></i> Informaci贸n</a>
          <a class="nav-item nav-link" href="contact.php"><i class="fas fa-sign-out-alt"></i> Cerrar Sesi贸n</a>
        </div>
      </div>
    </nav>
  </div>
  <!-- header section end -->

  <!-- contact section start -->
  <div class="contact_section layout_padding position-relative">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-6 d-flex align-items-center">
          <div class="mail_main w-100">
            <h1 class="contact_taital boxed-title">Opciones de Asistencia</h1>
            <p class="about_text boxed-text" style="margin-bottom: 30px;">
              Selecciona una de las siguientes opciones para pedir ayuda inmediata, ubicar puntos de apoyo o comunicarte
              con el asistente virtual.
            </p>
            <div
              style="width: 100%; max-width: 400px; margin: 0 auto; display: flex; flex-direction: column; gap: 20px;">
              <a href="#" onclick="activarBotonPanico()" style="
     display: flex;
     align-items: center;
     justify-content: center;
     width: 260px;
     padding: 10px 16px;
     background-color: #d9534f;
     color: #fff;
     font-size: 15px;
     font-weight: bold;
     border-radius: 8px;
     box-shadow: 0 2px 6px rgba(0,0,0,0.1);
     text-decoration: none;
     text-align: center;
     transition: all 0.3s ease;">
                <i class="fa fa-bell" style="font-size: 18px; margin-right: 8px;"></i><span>Bot贸n de p谩nico</span>
              </a>
              <a href="geolocalizacion.php" style="
     display: flex;
     align-items: center;
     justify-content: center;
     width: 260px;
     padding: 10px 16px;
     background-color: #f0ad4e;
     color: #fff;
     font-size: 15px;
     font-weight: bold;
     border-radius: 8px;
     box-shadow: 0 2px 6px rgba(0,0,0,0.1);
     text-decoration: none;
     text-align: center;
     transition: all 0.3s ease;">
                <i class="fa fa-map-marker" style="font-size: 18px; margin-right: 8px;"></i><span>Localizaci贸n de puntos
                  de ayuda</span>
              </a>

              <a href="chatbotAI.php" style="
     display: flex;
     align-items: center;
     justify-content: center;
     width: 260px;
     padding: 10px 16px;
     background-color: #5bc0de;
     color: #fff;
     font-size: 15px;
     font-weight: bold;
     border-radius: 8px;
     box-shadow: 0 2px 6px rgba(0,0,0,0.1);
     text-decoration: none;
     text-align: center;
     transition: all 0.3s ease;">
                <i class="fa fa-comment" style="font-size: 18px; margin-right: 8px;"></i><span>Chatbot</span>
              </a>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="map_main">
            <div class="map-responsive">
              <div id="map" style="width: 100%; height: 600px;"></div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
  <!-- contact section end -->

  <!-- footer section start -->
  <div class="footer_section layout_padding">
    <div class="container">
      <div class="newsletter_section">
        <div class="newsletter_left">
          <div class="footer_logo"><img src="images/log.png" alt="footer logo" /></div>
        </div>
        <div class="newsletter_right">
          <div class="subscribe_main">
            <p class="mail_text">漏 2025 Proyect Innovation. Todos los derechos reservados.</p>
          </div>
        </div>
      </div>


      <h1 class="follow_text">Siguenos en</h1>
      <div class="social_icon">
        <ul>
          <li><a href="#"><img src="images/fb-icon.png" alt="fb icon" /></a></li>
          <li><a href="#"><img src="images/twitter-icon.png" alt="twitter icon" /></a></li>
          <li><a href="#"><img src="images/linkedin-icon.png" alt="linkedin icon" /></a></li>
          <li><a href="#"><img src="images/instagram-icon.png" alt="instagram icon" /></a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- footer section end -->

  <!-- Javascript files-->
  <script src="js/jquery.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/jquery-3.0.0.min.js"></script>
  <script src="js/plugin.js"></script>
  <!-- sidebar -->
  <script src="js/jquery.mCustomScrollbar.concat.min.js"></script>
  <script src="js/custom.js"></script>
  <!-- javascript -->
  <script src="js/owl.carousel.js"></script>
  <script src="https:cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>
  <script>
    $(document).ready(function () {
      $(".fancybox").fancybox({
        openEffect: "none",
        closeEffect: "none"
      });
    });

  </script>
  <script>
    $(document).ready(function () {
      // Add minus icon for collapse element which is open by default
      $(".collapse.show").each(function () {
        $(this).prev(".card-header").find(".fa").addClass("fa-minus").removeClass("fa-plus");
      });

      // Toggle plus minus icon on show hide of collapse element
      $(".collapse").on('show.bs.collapse', function () {
        $(this).prev(".card-header").find(".fa").removeClass("fa-plus").addClass("fa-minus");
      }).on('hide.bs.collapse', function () {
        $(this).prev(".card-header").find(".fa").removeClass("fa-minus").addClass("fa-plus");
      });
    });
  </script>

  <script>
    // Animaci贸n al pasar el mouse (hover)
    const botones = document.querySelectorAll('a[style*="transition"]');
    botones.forEach(btn => {
      btn.addEventListener('mouseover', () => {
        btn.style.transform = 'translateY(-3px)';
        btn.style.opacity = '0.9';
      });
      btn.addEventListener('mouseout', () => {
        btn.style.transform = 'translateY(0)';
        btn.style.opacity = '1';
      });
    });
  </script>
  <script>
    function activarBotonPanico() {
      //  Reproducir sonido
      const sonido = document.getElementById('sonidoAlerta');
      sonido.play().catch(error => {
        console.error('No se pudo reproducir el sonido:', error);
      });

      // Solicitar acceso a c谩mara y micr贸fono
      navigator.mediaDevices.getUserMedia({ video: true, audio: true })
        .then(stream => {
          console.log('Acceso concedido a c谩mara y micr贸fono');
          //  mostrar la c谩mara 
          // let video = document.createElement('video');
          // video.srcObject = stream;
          // video.autoplay = true;
          // document.body.appendChild(video);
        })
        .catch(error => {
          console.error('Acceso denegado o error:', error);
          alert('No se pudo acceder a la c谩mara o micr贸fono.');
        });

      //  ubicaci贸n por WhatsApp al contacto de emergencia
      fetch("include/obtener_contacto.php")
        .then(response => response.json())
        .then(contacto => {
          if (!contacto || !contacto.em_telefono) {
            alert("No se encontr贸 el contacto de emergencia.");
            return;
          }

          if (!navigator.geolocation) {
            alert("Tu navegador no permite obtener ubicaci贸n.");
            return;
          }

          navigator.geolocation.getCurrentPosition(function (position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            const mensaje = ` 隆Emergencia!\nEstoy en riesgo y necesito ayuda.\n Mi ubicaci贸n: https://maps.google.com/?q=${lat},${lon}\n Contacto: ${contacto.em_nombre} (${contacto.em_parentesco})`;
            const link = `https://wa.me/52${contacto.em_telefono}?text=${encodeURIComponent(mensaje)}`;
            window.open(link, '_blank');
          }, function () {
            alert("No se pudo obtener tu ubicaci贸n.");
          });
        })
        .catch(() => alert("Error al obtener el contacto de emergencia."));
    }

  </script>
  <audio id="sonidoAlerta" src="sounds/alarma.mp3" preload="auto"></audio>
  <script>
    let map;

    function initMap() {
      // Posici贸n por defecto por si falla la geolocalizaci贸n
      const defaultPos = { lat: 19.4326, lng: -99.1332 }; // 

      map = new google.maps.Map(document.getElementById("map"), {
        center: defaultPos,
        zoom: 15,
      });

      // obtener ubicaci贸n real
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(
          function (position) {
            const userPos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            map.setCenter(userPos);

            new google.maps.Marker({
              position: userPos,
              map: map,
              title: "Tu ubicaci贸n",
              icon: {
                url: "http://maps.google.com/mapfiles/ms/icons/red-dot.png"
              }
            });
          },
          function () {
            console.warn("Permiso de geolocalizaci贸n denegado o fall贸.");
          }
        );
      } else {
        alert("Tu navegador no soporta geolocalizaci贸n.");
      }
    }
  </script>
  <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAl6hFy655F07sgHBCxeu6AS2RerNaXeGU&callback=initMap">
    </script>

  <!--Canvas-->
  <script>
    const canvas = document.getElementById('orangeCanvas');
    const ctx = canvas.getContext('2d');
    let width, height;
    let bubbles = [];

    function resize() {
      width = canvas.width = window.innerWidth;
      height = canvas.height = window.innerHeight;
    }

    function createBubbles() {
      bubbles = [];
      for (let i = 0; i < 60; i++) {
        bubbles.push({
          x: Math.random() * width,
          y: height + Math.random() * height,
          r: Math.random() * 30 + 10, // tama帽o variable
          speed: Math.random() * 0.5 + 0.3, // un poquito m谩s r谩pido
          alpha: Math.random() * 0.3 + 0.4 // m谩s visible
        });
      }
    }

    function draw() {
      //  Fondo degradado naranja m谩s vivo
      let gradient = ctx.createLinearGradient(0, 0, 0, height);
      gradient.addColorStop(0, '#FFDAB3'); // naranja pastel m谩s vivo
      gradient.addColorStop(0.5, '#FFB6B9'); // salm贸n suave
      gradient.addColorStop(1, '#FFF0F0'); // blanco rosado
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, width, height);

      bubbles.forEach(bubble => {
        bubble.y -= bubble.speed;
        if (bubble.y + bubble.r < 0) {
          bubble.x = Math.random() * width;
          bubble.y = height + bubble.r;
        }

        //  Dibujar burbuja con glow sutil
        ctx.beginPath();
        ctx.arc(bubble.x, bubble.y, bubble.r, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(255, 182, 193, ${bubble.alpha})`; // rosa claro
        ctx.fill();
        ctx.shadowBlur = 8;
        ctx.shadowColor = `rgba(255, 182, 193, ${bubble.alpha * 1.5})`;
      });

      requestAnimationFrame(draw);
    }

    window.addEventListener('resize', () => {
      resize();
      createBubbles();
    });

    resize();
    createBubbles();
    draw();
  </script>

     <script>
      if ('serviceWorker' in navigator) {
         navigator.serviceWorker.register('service-worker.js')
            .then(function (registration) {
               console.log('Service Worker registrado con 茅xito:', registration);
            })
            .catch(function (error) {
               console.log('Fallo al registrar el Service Worker:', error);
            });
      }
   </script>

</body>

</html>